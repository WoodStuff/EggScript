using EggScript.Exceptions;
using EggScript.Parsing;
using EggScript.Parsing.Nodes;

namespace EggScript.Runtime;

/// <summary>
/// Executes the EggScript program.
/// </summary>
internal static class Interpreter
{
	/// <summary>
	/// Runs an EggScript program based on the abstract syntax tree generated from the <see cref="Parser"/>.
	/// </summary>
	/// <param name="nodes">The list of nodes generated by the <see cref="Parser"/>.</param>
	/// <exception cref="EggScriptException">Thrown when an invalid node is detected.</exception>
	public static void Run(List<INode> nodes)
	{
		foreach (INode node in nodes)
		{
			switch (node)
			{
				case PrintNode printNode:
					Console.WriteLine(printNode.Value);
					break;

				default:
					throw new EggScriptException("Invalid node");
			}
		}
	}
}